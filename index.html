<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Virtual Try-On with Gemini</title>
    <link rel="stylesheet" href="index.css" />
    <script type="importmap">
      {
        "imports": {
          "@google/genai": "https://esm.run/@google/genai",
          "safevalues/dom": "https://cdn.jsdelivr.net/npm/safevalues@1.2.0/dist/mjs/dom/index.js",
          "safevalues": "https://cdn.jsdelivr.net/npm/safevalues@1.2.0/dist/mjs/index.js"
        }
      }
    </script>
  </head>
  <body>
    <div class="app-wrapper">
        <nav class="app-nav">
            <button id="nav-shoes" class="nav-button active" aria-label="Shoe Try-On">
                <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" viewBox="0 0 24 24" fill="currentColor"><g><rect fill="none" height="24" width="24"/></g><g><path d="M19.34,10.22C19.68,9.58,20,8.83,20,8c0-2.21-1.79-4-4-4c-0.89,0-1.71,0.29-2.4,0.78C12.8,4.3,12.03,4,11.5,4 c-1.1,0-2,0.9-2,2c0,0.22,0.04,0.44,0.11,0.65C9.25,6.25,8.82,6,8.5,6C7.12,6,6,7.12,6,8.5c0,0.32,0.06,0.63,0.16,0.91 C5.36,9.57,5,10.25,5,11c0,1.1,0.9,2,2,2c0.2,0,0.39-0.03,0.57-0.08C7.79,13.63,8,14.28,8,15c0,2.21,1.79,4,4,4 c2.04,0,3.72-1.53,3.96-3.51C16.32,15.19,17.08,15,18,15c1.1,0,2-0.9,2-2c0-0.06-0.01-0.12-0.02-0.18 C20.57,12.56,21,11.82,21,11C21,10.6,20.91,10.22,20.75,9.86C20.2,9.95,19.75,10.03,19.34,10.22z"/></g></svg>
                <span>Shoes</span>
            </button>
            <button id="nav-tshirts" class="nav-button" aria-label="T-Shirt Try-On">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M20.89 4.61c-1.33-1.33-3.11-2.08-4.95-2.08-1.42 0-2.78.43-3.94 1.25-1.16-.82-2.52-1.25-3.94-1.25-1.84 0-3.62.75-4.95 2.08C1.75 5.93 1 7.71 1 9.55c0 2.13 1.04 4.04 2.69 5.25C5.16 15.99 7.37 17 9.95 17c1.42 0 2.78-.43 3.94-1.25 1.16.82 2.52 1.25 3.94 1.25 2.58 0 4.79-1.01 6.27-2.2C22.96 13.59 24 11.68 24 9.55c0-1.84-.75-3.62-2.08-4.94h-.03zM9.95 15c-1.84 0-3.62-.75-4.95-2.08C3.67 11.59 3 9.81 3 7.97c0-1.28.52-2.48 1.37-3.33 1.33-1.33 3.11-2.08 4.95-2.08s3.62.75 4.95 2.08c.85.85 1.37 2.05 1.37 3.33 0 1.84-.67 3.62-2 4.95-1.32 1.33-3.11 2.08-4.95 2.08zm10-2.08c-1.33 1.33-3.11 2.08-4.95 2.08s-3.62-.75-4.95-2.08c-.85-.85-1.37-2.05-1.37-3.33 0-1.84.67-3.62 2-4.95 1.32-1.33 3.11-2.08 4.95-2.08 1.84 0 3.62.75 4.95 2.08 1.33 1.33 2.08 3.11 2.08 4.95s-.75 3.62-2.08 4.92z"/></svg>
                <span>T-Shirts</span>
            </button>
             <button id="nav-hoodies" class="nav-button" aria-label="Hoodie Try-On">
                <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" viewBox="0 0 24 24" fill="currentColor"><g><rect fill="none" height="24" width="24"/></g><g><path d="M22.5,11.5c-1.65,0-3-1.35-3-3s1.35-3,3-3s3,1.35,3,3S24.15,11.5,22.5,11.5z M22.5,7.5c-0.55,0-1,0.45-1,1s0.45,1,1,1 s1-0.45,1-1S23.05,7.5,22.5,7.5z M12,13c-2.42,0-4.5,1.72-4.95,4H4.07C3.5,15.19,1.7,14.13,1.7,12c0-2.3,1.98-4.17,4.4-4.17 c0.33,0,0.65,0.04,0.96,0.11C7.54,6.04,9.15,5,11,5h2c1.85,0,3.46,1.04,3.95,2.94c0.32-0.07,0.64-0.11,0.96-0.11 c2.42,0,4.4,1.87,4.4,4.17c0,2.13-1.8,3.19-2.37,5H16.95C16.5,14.72,14.42,13,12,13z M17,19H7c0-2.21,1.79-4,4-4h2 C15.21,15,17,16.79,17,19z"/></g></svg>
                <span>Hoodies</span>
            </button>
            <button id="nav-jackets" class="nav-button" aria-label="Jacket & Coat Try-On">
              <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" viewBox="0 0 24 24" fill="currentColor"><g><rect fill="none" height="24" width="24"/></g><g><path d="M18,7h-2V5c0-1.1-0.9-2-2-2h-4C8.9,3,8,3.9,8,5v2H6C4.9,7,4,7.9,4,9v11c0,1.1,0.9,2,2,2h12c1.1,0,2-0.9,2-2V9 C20,7.9,19.1,7,18,7z M10,5h4v2h-4V5z"/></g></svg>
              <span>Jackets</span>
            </button>
            <button id="nav-pants" class="nav-button" aria-label="Pants Try-On">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M16 1L8 1 7.24 3.76 2 4l2 20h16l2-20-5.24-.24L16 1zM8.76 3h6.48l.52 2H8.24l.52-2zM4.42 21L3 6h4v13H4.42zM9 19V6h6v13H9zm9.58-2h-2.58V6H21L18.58 19z"/></svg>
                <span>Pants</span>
            </button>
            <button id="nav-suits" class="nav-button" aria-label="Suit Try-On">
                <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" viewBox="0 0 24 24" fill="currentColor"><g><rect fill="none" height="24" width="24"/></g><g><g><path d="M18,7h-2V5c0-1.1-0.9-2-2-2h-4C8.9,3,8,3.9,8,5v2H6C4.9,7,4,7.9,4,9v11c0,1.1,0.9,2,2,2h12c1.1,0,2-0.9,2-2V9 C20,7.9,19.1,7,18,7z M10,5h4v2h-4V5z M12,15.5l-1.25,0.75l0.5-1.5L10,14l1.5-0.25L12,12.5l0.5,1.25L14,14l-1.25,0.75l0.5,1.5 L12,15.5z"/></g></g></svg>
                <span>Suits</span>
            </button>
            <button id="nav-traditional" class="nav-button" aria-label="Traditional Wear Try-On">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M7 1v4h10V1h-2v2H9V1H7zm10 10.5V23h-2v-5H9v5H7V11.5L4 8V6h16v2l-3 3.5z"/>
                </svg>
                <span>Traditional</span>
            </button>
            <button id="nav-sportswear" class="nav-button" aria-label="Sportswear Try-On">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zM6.1 9.38l-.01.01L4.2 10.5l1.45 2.51.01.01 1.8-1.04-1.45-2.6zm5.9-4.38h-1.8l-1.04 1.8 1.45 2.52 1.43-2.51L12 5zm5.9 4.38l-1.45 2.6 1.8 1.04.01-.01L19.8 10.5l-1.8-1.12zm-1.04 7.42l-1.45-2.52 1.04-1.8h1.8l1.45-2.51-1.04-1.8h-1.8l-1.45 2.51-1.45-2.51H10.1l-1.45 2.51-1.45-2.51H5.4l-1.04 1.8 1.45 2.51-1.8 1.04.01.01 1.89 1.1.01.01 1.45-2.51 1.45 2.51h1.8l1.45-2.51 1.45 2.51h1.8l1.04-1.8-1.45-2.51 1.8-1.04-.01-.01-1.89-1.1z"/></svg>
                <span>Sportswear</span>
            </button>
            <button id="nav-accessories" class="nav-button" aria-label="Accessories Try-On">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-5.5-2.5l7.51-3.49L17.5 6.5 9.99 9.99 6.5 17.5zm5.5-6.6c.61 0 1.1.49 1.1 1.1s-.49 1.1-1.1 1.1-1.1-.49-1.1-1.1.49-1.1 1.1-1.1z"/></svg>
                <span>Accessories</span>
            </button>
        </nav>
        <div class="container">
          <div class="controls-panel">
            <header>
              <h1 id="tool-title">Virtual Shoe Try-On</h1>
              <p id="tool-description">Upload a photo of a model and a photo of shoes to see them combined!</p>
            </header>
            <div id="sub-nav-accessories" class="sub-nav" style="display: none;">
                <button id="nav-glasses" class="sub-nav-button" aria-label="Glasses & Sunglasses Try-On">Glasses</button>
                <button id="nav-hats" class="sub-nav-button" aria-label="Hats & Caps Try-On">Hats</button>
                <button id="nav-watches" class="sub-nav-button" aria-label="Watches Try-On">Watches</button>
                <button id="nav-bracelets" class="sub-nav-button" aria-label="Bracelets Try-On">Bracelets</button>
                <button id="nav-bags" class="sub-nav-button" aria-label="Bags Try-On">Bags</button>
            </div>
            <main>
              <div class="uploader-group">
                <div class="image-uploader-container">
                  <h2>Model Image</h2>
                  <div id="model-uploader" class="image-uploader">
                    <input type="file" id="model-file-input" accept="image/*" hidden />
                    <img id="model-preview" class="image-preview" alt="Model preview" />
                    <div class="uploader-prompt">
                      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z"/></svg>
                      <span>Click or drag to upload</span>
                    </div>
                    <button class="remove-btn" aria-label="Remove model image" style="display: none;">
                      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
                    </button>
                  </div>
                </div>
                <div class="image-uploader-container">
                  <h2 id="item-uploader-title">Shoe Image</h2>
                  <div id="item-uploader" class="image-uploader">
                    <input type="file" id="item-file-input" accept="image/*" hidden />
                    <img id="item-preview" class="image-preview" alt="Item preview" />
                    <div class="uploader-prompt">
                      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z"/></svg>
                      <span>Click or drag to upload</span>
                    </div>
                    <button class="remove-btn" aria-label="Remove item image" style="display: none;">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
                    </button>
                  </div>
                </div>
              </div>
              <button id="generate-btn" disabled>
                <span class="button-text">Generate Image</span>
                <div class="spinner" style="display: none;"></div>
              </button>
              <p id="status-text" class="status-text"></p>
            </main>
          </div>
          <div class="output-panel">
            <div id="output-placeholder">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="placeholder-icon"><path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"/></svg>
              <p>Your generated image will appear here</p>
            </div>
            <div id="result-container" style="display: none;">
              <img id="result-image" alt="Generated image of model wearing item" />
              <a id="download-btn" class="button" href="#" download="generated-image.png">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/></svg>
                <span>Download Image</span>
              </a>
            </div>
          </div>
        </div>
    </div>
    <script type="module" src="/index.tsx"></script>
  </body>
</html>